<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>iPhone 3.0 geolocation demo</title>
	<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" name="viewport"/>
	<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
	//<![CDATA[
		function locationHandler(obj) {
			var lat = location.coords.latitude;
			var lon = location.coords.longitude;
			var accuracy = location.coords.accuracy;
			
			var html = '<img src="http://maps.google.com/staticmap?center='+lat+','+lon+'&size=300x200&maptype=hybrid&zoom=16&key='+KEY+'"/><br/>';
			html += '<strong>Latitude:</strong> '+lat+'<br/>';
			html += '<strong>Longitude:</strong> '+lon+'<br/>';
			html += '<strong>Accuracy:</strong> '+accuracy+'<br/>';
			obj.html(html);
		}
		
		function failHandler(obj) {
			obj.html("Cannot get location");
		}
		
		$(document).ready(function() {
			var message = $("#message");
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(locationHandler(message), failHandler(message));
			} else {
				message.html('<strong>Geolocation Not Available</strong>');
			}
		});
	//]]>
	</script>
</head>
<body>
	<div id="message">Location unknown</div>
</body>
</html>